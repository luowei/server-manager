# 项目概述

## 项目基本信息

**项目名称**: 服务器管理系统 (Server Manager)  
**版本**: v1.2.0  
**开发语言**: Python 3.7+  
**主要框架**: FastAPI + TinyDB + Bootstrap 5  
**项目类型**: Web应用程序  

## 核心功能

### 1. WOL设备管理
- **设备注册**: 支持通过主机名、IP地址或MAC地址添加设备
- **状态监控**: 实时检测设备在线/离线状态
- **远程唤醒**: 发送WOL魔术包唤醒设备
- **连通性测试**: Ping设备检查网络连通性
- **设备管理**: 完整的CRUD操作

### 2. 定时任务管理
- **任务类型**: 支持Shell脚本任务执行
- **调度模式**: 
  - Cron表达式调度
  - 间隔时间调度
  - 手动执行模式（无调度配置）
- **状态控制**: 任务启用/禁用切换
- **执行监控**: 详细的执行日志和状态跟踪
- **立即执行**: 手动触发任务执行

### 3. 执行记录管理
- **记录查看**: 完整的任务执行历史
- **搜索功能**: 按任务名称、状态等条件搜索
- **批量删除**: 智能删除搜索结果或清空所有记录
- **日志详情**: 查看详细执行日志和错误信息

## 系统架构

### 架构模式
采用经典的三层架构模式：
- **表现层**: Bootstrap 5 + JavaScript (响应式Web界面)
- **业务层**: FastAPI (RESTful API服务)
- **数据层**: TinyDB + YAMLStorage (嵌入式数据库)

### 核心组件

```
server_manager/
├── app/                    # 核心业务逻辑
│   ├── api.py             # FastAPI路由和API端点
│   ├── database.py        # 数据库操作接口
│   ├── models.py          # Pydantic数据模型
│   ├── scheduler.py       # APScheduler任务调度
│   ├── storage.py         # 自定义YAML存储引擎
│   └── wol.py            # WOL协议实现
├── static/                # 前端静态资源
│   ├── css/              # 样式文件(Bootstrap + 自定义)
│   └── js/               # JavaScript脚本
├── templates/             # Jinja2 HTML模板
├── data/                 # 数据存储目录(YAML格式)
├── logs/                 # 日志文件目录
└── main.py              # 应用启动入口
```

## 设计理念

### 1. 简洁性
- 单一可执行文件，无复杂依赖
- 嵌入式数据库，无需额外数据库服务
- 自包含部署，支持Docker容器化

### 2. 可靠性
- 异步任务执行，不阻塞主服务
- 完整的错误处理和日志记录
- 任务超时和重试机制

### 3. 易用性
- 响应式Web界面，支持移动端
- 直观的操作界面和实时反馈
- 代码编辑器语法高亮支持

### 4. 可扩展性
- 模块化架构设计
- 标准化的API接口
- 灵活的配置管理

## 技术特色

### 1. 数据持久化
- 使用YAML格式存储，人类可读
- 支持版本控制和手动编辑
- 自定义TinyDB存储后端

### 2. 任务调度
- 基于APScheduler的高级调度
- 支持多种触发器类型
- 任务执行状态追踪

### 3. 网络功能
- WOL协议原生实现
- 异步网络操作
- 跨平台网络支持

### 4. 前端体验
- Bootstrap 5响应式设计
- CodeMirror代码编辑器
- 实时状态更新

## 应用场景

1. **家庭/小型办公室**: 管理多台设备的远程唤醒
2. **开发环境**: 自动化开发任务和部署脚本
3. **系统运维**: 定时执行维护脚本和监控任务
4. **实验室管理**: 控制实验设备的开关和状态监控